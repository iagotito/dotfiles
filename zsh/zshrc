# prompt configuration

fpath=($DOTFILES/prompt $fpath)
autoload -Uz prompt_prettification_setup; prompt_prettification_setup

# zhistory

setopt PUSHD_IGNORE_DUPS    # Do not store duplicates in the stack.
setopt PUSHD_SILENT         # Do not print the directory stack after pushd or popd.
setopt INC_APPEND_HISTORY
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_SAVE_NO_DUPS
setopt HIST_FIND_NO_DUPS

# zsh directory stack

setopt AUTO_PUSHD           # Push the current directory visited on the stack.
setopt PUSHD_IGNORE_DUPS    # Do not store duplicates in the stack.
setopt PUSHD_SILENT         # Do not print the directory stack after pushd or popd.
alias ds='dirs -v'  # directy stack
                    # 'd' is used to deactivate python venvs (see $DOTFILES/aliases)
for index ({1..9}) alias "$index"="cd +${index}"; unset index

# functions

source $DOTFILES/functions

# aliases

source $DOTFILES/aliases
source $DOTFILES/personal-aliases

# asdf

. $HOME/.asdf/asdf.sh

# append completions to fpath
fpath=(${ASDF_DIR}/completions $fpath)
# initialise completions with ZSH's compinit
autoload -Uz compinit; compinit
_comp_options+=(globdots) # With hidden files
source $DOTFILES/zsh/plugins/completion.zsh

# activate the syntax highlighting
# see: https://github.com/zsh-users/zsh-syntax-highlighting
ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets pattern cursor)
source $DOTFILES/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# starts new terminal with a tmux session and close it when quit tmux
if [ -t 0 ] && [[ -z $TMUX ]] && [[ $- = *i* ]]; then
  exec tmux;
fi

